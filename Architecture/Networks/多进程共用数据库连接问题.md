## 多进程共用mysql链接引发的一个问题

我们知道，每次fork操作系统都会复制进程的所有信息产生一个子进程（部分写时复制），其中就包括socket链接资源符。每个进程在PCB（Process Control Block）中都保存着一份文件描述符表，文件描述符就是这个表的索引，每个表项都有一个指向已打开文件的指针，现在我们明确一下：已打开的文件在内核中用file结构体表示，文件描述符表中的指针指向file结构体。实际上包括文件描述符，socket等资源符号，操作系统并没有真的复制，而是在父子进程之间复制了资源符的指针。